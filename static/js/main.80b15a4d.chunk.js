(this["webpackJsonpreact-mmd-viewer"]=this["webpackJsonpreact-mmd-viewer"]||[]).push([[0],{246:function(e){e.exports=JSON.parse('{"b":"react-mmd-viewer","a":{"name":"negimasato","email":"nishimasa.subaru@gmail.com"},"c":"0.4.0"}')},351:function(e,t,r){},353:function(e,t,r){},358:function(e,t){},359:function(e,t){},367:function(e,t){},370:function(e,t){},371:function(e,t){},382:function(e,t,r){"use strict";r.r(t);var n=r(5),a=r.n(n),i=r(53),o=r.n(i),s=(r(351),r(6)),l=r.n(s),c=r(13),u=r(7),d=r(246),h=(r(353),r(333)),p=r(413),f=r(414),m=r(415),A=r(416),g=r(417),b=r(412),v=r(334),x=r(427),j=r(418),y=r(419),O=r(329),C=r.n(O),w=r(330),M=r.n(w),k=r(331),B=r.n(k),I=r(420),R=r(108),S=r(22),T=r(1),E=function e(t){Object(T.a)(this,e),this.id=void 0,this.mesh=void 0,this.modelName=void 0,this.comment=void 0,this.id=t,this.mesh=null,this.modelName=null,this.comment=null},F=r(253),D=r(9),P=r(254),Q=r(255),N=function(){function e(e){D.Loader.call(this,e),this.loader=new D.FileLoader(this.manager),this.parser=null,this.fileArray=[],this.meshBuilder=new r(this.manager),this.animationBuilder=new o}e.prototype=Object.assign(Object.create(D.Loader.prototype),{constructor:e,setAnimationPath:function(e){return this.animationPath=e,this},readFileAsDataURL:function(){var e=Object(c.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){var r=new FileReader;r.onload=function(t){return e(r.result)},r.readAsDataURL(t)}));case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getFilesFromDir:function(){var e=Object(c.a)(l.a.mark((function e(t,r){var n,a,i,o,s,c,d,h,p,f,m;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=!0,a=!1,e.prev=2,o=Object(F.a)(t);case 4:return e.next=6,o.next();case 6:return s=e.sent,n=s.done,e.next=10,s.value;case 10:if(c=e.sent,n){e.next=28;break}if(d=c,h=Object(u.a)(d,2),p=h[0],"file"!==(f=h[1]).kind){e.next=22;break}return e.next=16,f.getFile();case 16:return m=e.sent,e.next=19,this.readFileAsDataURL(m);case 19:this.fileArray[r+p]=e.sent,e.next=25;break;case 22:if("directory"!==f.kind){e.next=25;break}return e.next=25,this.getFilesFromDir(f,f.name+"\\");case 25:n=!0,e.next=4;break;case 28:e.next=34;break;case 30:e.prev=30,e.t0=e.catch(2),a=!0,i=e.t0;case 34:if(e.prev=34,e.prev=35,n||null==o.return){e.next=39;break}return e.next=39,o.return();case 39:if(e.prev=39,!a){e.next=42;break}throw i;case 42:return e.finish(39);case 43:return e.finish(34);case 44:case"end":return e.stop()}}),e,this,[[2,30,34,44],[35,,39,43]])})));return function(t,r){return e.apply(this,arguments)}}(),loadFromDir:function(){var e=Object(c.a)(l.a.mark((function e(t,r,n,a){var i,o,s,c,d,h,p,f,m,A,g,b,v,x,j=this;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=this.meshBuilder.setCrossOrigin(this.crossOrigin),e.next=3,this.getFilesFromDir(t,"");case 3:o=!0,s=!1,e.prev=5,d=Object(F.a)(t);case 7:return e.next=9,d.next();case 9:return h=e.sent,o=h.done,e.next=13,h.value;case 13:if(p=e.sent,o){e.next=32;break}if(f=p,m=Object(u.a)(f,2),A=m[0],g=m[1],"pmx"!==(b=this._extractExtension(A).toLowerCase())){e.next=24;break}return e.next=20,g.getFile();case 20:v=e.sent,this.loadPMXFromFile(v,(function(e){r(i.buildDir(e,j.fileArray,null,null))})),e.next=29;break;case 24:if("pmd"!==b){e.next=29;break}return e.next=27,g.getFile();case 27:x=e.sent,this.loadPMDFromFile(x,(function(e){r(i.buildDir(e,j.fileArray,null,null))}));case 29:o=!0,e.next=7;break;case 32:e.next=38;break;case 34:e.prev=34,e.t0=e.catch(5),s=!0,c=e.t0;case 38:if(e.prev=38,e.prev=39,o||null==d.return){e.next=43;break}return e.next=43,d.return();case 43:if(e.prev=43,!s){e.next=46;break}throw c;case 46:return e.finish(43);case 47:return e.finish(38);case 48:case"end":return e.stop()}}),e,this,[[5,34,38,48],[39,,43,47]])})));return function(t,r,n,a){return e.apply(this,arguments)}}(),load:function(e,t,r,n){var a,i=this.meshBuilder.setCrossOrigin(this.crossOrigin);a=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:D.LoaderUtils.extractUrlBase(e);var o=this._extractExtension(e).toLowerCase();"pmd"===o||"pmx"===o?this["pmd"===o?"loadPMD":"loadPMX"](e,(function(e){t(i.build(e,a,r,n))}),r,n):n&&n(new Error("THREE.MMDLoader: Unknown model file extension ."+o+"."))},loadAnimation:function(e,t,r,n,a){var i=this.animationBuilder;this.loadVMD(e,(function(e){r(t.isCamera?i.buildCameraAnimation(e):i.build(e,t))}),n,a)},loadWithAnimation:function(e,t,r,n,a){var i=this;this.load(e,(function(e){i.loadAnimation(t,e,(function(t){r({mesh:e,animation:t})}),n,a)}),n,a)},loadPMD:function(e,t,r,n){var a=this._getParser();this.loader.setMimeType(void 0).setPath(this.path).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(e,(function(e){t(a.parsePmd(e,!0))}),r,n)},loadPMDFromFile:function(e,t,r,n){var a=this._getParser(),i=new FileReader;i.onload=function(){t(a.parsePmd(i.result,!0))},i.readAsArrayBuffer(e)},loadPMX:function(e,t,r,n){var a=this._getParser();this.loader.setMimeType(void 0).setPath(this.path).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(e,(function(e){t(a.parsePmx(e,!0))}),r,n)},loadPMXFromFile:function(e,t,r,n){var a=this._getParser(),i=new FileReader;i.onload=function(){t(a.parsePmx(i.result,!0))},i.readAsArrayBuffer(e)},loadVMD:function(e,t,r,n){var a=Array.isArray(e)?e:[e],i=[],o=a.length,s=this._getParser();this.loader.setMimeType(void 0).setPath(this.animationPath).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials);for(var l=0,c=a.length;l<c;l++)this.loader.load(a[l],(function(e){i.push(s.parseVmd(e,!0)),i.length===o&&t(s.mergeVmds(i))}),r,n)},loadVPD:function(e,t,r,n,a){var i=this._getParser();this.loader.setMimeType(t?void 0:"text/plain; charset=shift_jis").setPath(this.animationPath).setResponseType("text").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(e,(function(e){r(i.parseVpd(e,!0))}),n,a)},loadVPDFromFile:function(e,t,r,n){var a=this._getParser(),i=new FileReader;i.onload=function(){t(a.parseVpd(i.result,!0))},i.onprogress=function(e){r(e)},i.onerror=function(e){n(e)},i.readAsText(e,"Shift_JIS")},_extractExtension:function(e){var t=e.lastIndexOf(".");return t<0?"":e.slice(t+1)},_getParser:function(){if(null===this.parser){if("undefined"===typeof Q.a)throw new Error("THREE.MMDLoader: Import MMDParser https://github.com/takahirox/mmd-parser");this.parser=new Q.a.Parser}return this.parser}});var t=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/bWiiMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh8aBHZBl14e8wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOUlEQVRYR+3WMREAMAwDsYY/yoDI7MLwIiP40+RJklfcCCBAgAABAgTqArfb/QMCCBAgQIAAgbbAB3z/e0F3js2cAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/B5ilMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh81dWyx0gFwKAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOklEQVRYR+3WoREAMAwDsWb/UQtCy9wxTOQJ/oQ8SXKKGwEECBAgQIBAXeDt7f4BAQQIECBAgEBb4AOz8Hzx7WLY4wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+1XwW7CMAy1+f9fZOMysSEOEweEOPRNdm3HbdOyIhAcklPrOs/PLy9RygBALxzcCDQFmgJNgaZAU6Ap0BR4PwX8gsRMVLssMRH5HcpzJEaWL7EVg9F1IHRlyqQohgVr4FGUlUcMJSjcUlDw0zvjeun70cLWmneoyf7NgBTQSniBTQQSuJAZsOnnaczjIMb5hCiuHKxokCrJfVnrctyZL0PkJAJe1HMil4nxeyi3Ypfn1kX51jpPvo/JeCNC4PhVdHdJw2XjBR8brF8PEIhNVn12AgP7uHsTBguBn53MUZCqv7Lp07Pn5k1Ro+uWmUNn7D+M57rtk7aG0Vo73xyF/fbFf0bPJjDXngnGocDTdFhygZjwUQrMNrDcmZlQT50VJ/g/UwNyHpu778+yW+/ksOz/BFo54P4AsUXMfRq7XWsAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACMElEQVRYR+2Xv4pTQRTGf2dubhLdICiii2KnYKHVolhauKWPoGAnNr6BD6CvIVaihYuI2i1ia0BY0MZGRHQXjZj/mSPnnskfNWiWZUlzJ5k7M2cm833nO5Mziej2DWWJRUoCpQKlAntSQCqgw39/iUWAGmh37jrRnVsKlgpiqmkoGVABA7E57fvY+pJDdgKqF6HzFCSADkDq+F6AHABtQ+UMVE5D7zXod7fFNhTEckTbj5XQgHzNN+5tQvc5NG7C6BNkp6D3EmpXHDR+dQAjFLchW3VS9rlw3JBh+B7ys5Cf9z0GW1C/7P32AyBAOAz1q4jGliIH3YPuBnSfQX4OGreTIgEYQb/pBDtPnEQ4CivXYPAWBk13oHrB54yA9QuSn2H4AcKRpEILDt0BUzj+RLR1V5EqjD66NPRBVpLcQwjHoHYJOhsQv6U4mnzmrIXJCFr4LDwm/xBUoboG9XX4cc9VKdYoSA2yk5NQLJaKDUjTBoveG3Z2TElTxwjNK4M3LEZgUdDdruvcXzKBpStgp2NPiWi3ks9ZXxIoFVi+AvHLdc9TqtjL3/aYjpPlrzOcEnK62Szhimdd7xX232zFDTgtxezOu3WNMRLjiKgjtOhHVMd1loynVHvOgjuIIJMaELEqhJAV/RCSLbWTcfPFakFgFlALTRRvx+ok6Hlp/Q+v3fmx90bMyUzaEAhmM3KvHlXTL5DxnbGf/1M8RNNACLL5MNtPxP/mypJAqcDSFfgFhpYqWUzhTEAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII="];function r(e){this.geometryBuilder=new a,this.materialBuilder=new i(e)}function n(e){var t,r,n,a,i=e.geometry,o=[];if(i&&void 0!==i.bones){for(n=0,a=i.bones.length;n<a;n++)r=i.bones[n],t=new D.Bone,o.push(t),t.name=r.name,t.position.fromArray(r.pos),t.quaternion.fromArray(r.rotq),void 0!==r.scl&&t.scale.fromArray(r.scl);for(n=0,a=i.bones.length;n<a;n++)-1!==(r=i.bones[n]).parent&&null!==r.parent&&void 0!==o[r.parent]?o[r.parent].add(o[n]):e.add(o[n])}return e.updateMatrixWorld(!0),o}function a(){}function i(e){this.manager=e,this.textureLoader=new D.TextureLoader(this.manager),this.tgaLoader=null}function o(){}function s(e,t,r,n,a){D.Interpolant.call(this,e,t,r,n),this.interpolationParams=a}return r.prototype={constructor:r,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},build:function(e,t,r,a){var i=this.geometryBuilder.build(e),o=this.materialBuilder.setCrossOrigin(this.crossOrigin).setResourcePath(t).build(e,i,r,a),s=new D.SkinnedMesh(i,o),l=new D.Skeleton(n(s));return s.bind(l),s},buildDir:function(e,t,r,a){var i=this.geometryBuilder.build(e),o=this.materialBuilder.setCrossOrigin(this.crossOrigin).setResourceDir(t).build(e,i,r,a),s=new D.SkinnedMesh(i,o),l=new D.Skeleton(n(s));return s.bind(l),s}},a.prototype={constructor:a,build:function(e){for(var t=[],r=[],n=[],a=[],i=[],o=[],s=[],l=[],c=[],u=[],d=[],h=[],p=[],f=[],m=0,A={},g=0;g<e.metadata.vertexCount;g++){for(var b=e.vertices[g],v=0,x=b.position.length;v<x;v++)t.push(b.position[v]);for(v=0,x=b.normal.length;v<x;v++)n.push(b.normal[v]);for(v=0,x=b.uv.length;v<x;v++)r.push(b.uv[v]);for(v=0;v<4;v++)s.push(b.skinIndices.length-1>=v?b.skinIndices[v]:0);for(v=0;v<4;v++)l.push(b.skinWeights.length-1>=v?b.skinWeights[v]:0)}for(g=0;g<e.metadata.faceCount;g++){var j=e.faces[g];for(v=0,x=j.indices.length;v<x;v++)a.push(j.indices[v])}for(g=0;g<e.metadata.materialCount;g++){var y=e.materials[g];i.push({offset:3*m,count:3*y.faceCount}),m+=y.faceCount}for(g=0;g<e.metadata.rigidBodyCount;g++){var O=e.rigidBodies[g],C=A[O.boneIndex];C=void 0===C?O.type:Math.max(O.type,C),A[O.boneIndex]=C}for(g=0;g<e.metadata.boneCount;g++){-1!==(W={parent:(T=e.bones[g]).parentIndex,name:T.name,pos:T.position.slice(0,3),rotq:[0,0,0,1],scl:[1,1,1],rigidBodyType:void 0!==A[g]?A[g]:-1}).parent&&(W.pos[0]-=e.bones[W.parent].position[0],W.pos[1]-=e.bones[W.parent].position[1],W.pos[2]-=e.bones[W.parent].position[2]),o.push(W)}if("pmd"===e.metadata.format)for(g=0;g<e.metadata.ikCount;g++){var w={target:(M=e.iks[g]).target,effector:M.effector,iteration:M.iteration,maxAngle:4*M.maxAngle,links:[]};for(v=0,x=M.links.length;v<x;v++){(k={}).index=M.links[v].index,k.enabled=!0,e.bones[k.index].name.indexOf("\u3072\u3056")>=0&&(k.limitation=new D.Vector3(1,0,0)),w.links.push(k)}d.push(w)}else for(g=0;g<e.metadata.boneCount;g++){var M;if(void 0!==(M=e.bones[g].ik)){for(w={target:g,effector:M.effector,iteration:M.iteration,maxAngle:M.maxAngle,links:[]},v=0,x=M.links.length;v<x;v++){var k;if((k={}).index=M.links[v].index,k.enabled=!0,1===M.links[v].angleLimitation){var B=M.links[v].lowerLimitationAngle,I=M.links[v].upperLimitationAngle,R=-I[0],S=-I[1];I[0]=-B[0],I[1]=-B[1],B[0]=R,B[1]=S,k.rotationMin=(new D.Vector3).fromArray(B),k.rotationMax=(new D.Vector3).fromArray(I)}w.links.push(k)}d.push(w)}}if("pmx"===e.metadata.format){for(g=0;g<e.metadata.boneCount;g++){var T,E=(T=e.bones[g]).grant;if(void 0!==E){w={index:g,parentIndex:E.parentIndex,ratio:E.ratio,isLocal:E.isLocal,affectRotation:E.affectRotation,affectPosition:E.affectPosition,transformationClass:T.transformationClass};h.push(w)}}h.sort((function(e,t){return e.transformationClass-t.transformationClass}))}function F(t,r,n){for(var a=0;a<r.elementCount;a++){var i,o=r.elements[a];i="pmd"===e.metadata.format?e.morphs[0].elements[o.index].index:o.index,t.array[3*i+0]+=o.position[0]*n,t.array[3*i+1]+=o.position[1]*n,t.array[3*i+2]+=o.position[2]*n}}for(g=0;g<e.metadata.morphCount;g++){var P=e.morphs[g],Q={name:P.name},N=new D.Float32BufferAttribute(3*e.metadata.vertexCount,3);N.name=P.name;for(v=0;v<3*e.metadata.vertexCount;v++)N.array[v]=t[v];if("pmd"===e.metadata.format)0!==g&&F(N,P,1);else if(0===P.type)for(v=0;v<P.elementCount;v++){var U=e.morphs[P.elements[v].index],V=P.elements[v].ratio;1===U.type&&F(N,U,V)}else 1===P.type?F(N,P,1):2===P.type||3===P.type||4===P.type||5===P.type||6===P.type||7===P.type||P.type;c.push(Q),u.push(N)}for(g=0;g<e.metadata.rigidBodyCount;g++){var L=e.rigidBodies[g];Q={};for(var z in L)Q[z]=L[z];if("pmx"===e.metadata.format&&-1!==Q.boneIndex){var W=e.bones[Q.boneIndex];Q.position[0]-=W.position[0],Q.position[1]-=W.position[1],Q.position[2]-=W.position[2]}p.push(Q)}for(g=0;g<e.metadata.constraintCount;g++){var Y=e.constraints[g];Q={};for(var z in Y)Q[z]=Y[z];var _=p[Q.rigidBodyIndex1],J=p[Q.rigidBodyIndex2];0!==_.type&&2===J.type&&-1!==_.boneIndex&&-1!==J.boneIndex&&e.bones[J.boneIndex].parentIndex===_.boneIndex&&(J.type=1),f.push(Q)}var K=new D.BufferGeometry;K.setAttribute("position",new D.Float32BufferAttribute(t,3)),K.setAttribute("normal",new D.Float32BufferAttribute(n,3)),K.setAttribute("uv",new D.Float32BufferAttribute(r,2)),K.setAttribute("skinIndex",new D.Uint16BufferAttribute(s,4)),K.setAttribute("skinWeight",new D.Float32BufferAttribute(l,4)),K.setIndex(a);g=0;for(var H=i.length;g<H;g++)K.addGroup(i[g].offset,i[g].count,g);return K.bones=o,K.morphTargets=c,K.morphAttributes.position=u,K.morphTargetsRelative=!1,K.userData.MMD={bones:o,iks:d,grants:h,rigidBodies:p,constraints:f,format:e.metadata.format,morphs:e.morphs,frames:e.frames,modelName:e.metadata.modelName,englishModelName:e.metadata.englishModelName,comment:e.metadata.comment,englishComment:e.metadata.englishComment},K.computeBoundingSphere(),K}},i.prototype={constructor:i,crossOrigin:"anonymous",resourcePath:void 0,resourceDir:void 0,setCrossOrigin:function(e){return this.crossOrigin=e,this},setResourcePath:function(e){return this.resourcePath=e,this},setResourceDir:function(e){return this.resourceDir=e,this},build:function(e,t){var r=[],n={};this.textureLoader.setCrossOrigin(this.crossOrigin);for(var a=0;a<e.metadata.materialCount;a++){var i=e.materials[a],o={userData:{}};if(void 0!==i.name&&(o.name=i.name),o.color=(new D.Color).fromArray(i.diffuse),o.opacity=i.diffuse[3],o.emissive=(new D.Color).fromArray(i.ambient),o.transparent=1!==o.opacity,o.skinning=t.bones.length>0,o.morphTargets=t.morphTargets.length>0,o.fog=!0,o.blending=D.CustomBlending,o.blendSrc=D.SrcAlphaFactor,o.blendDst=D.OneMinusSrcAlphaFactor,o.blendSrcAlpha=D.SrcAlphaFactor,o.blendDstAlpha=D.DstAlphaFactor,"pmx"===e.metadata.format&&1===(1&i.flag)?o.side=D.DoubleSide:o.side=1===o.opacity?D.FrontSide:D.DoubleSide,"pmd"===e.metadata.format){if(i.fileName){var s=i.fileName.split("*");if(o.map=this._loadTexture(s[0],n),s.length>1){var l=s[1].slice(-4).toLowerCase();o.envMap=this._loadTexture(s[1],n),o.combine=".sph"===l?D.MultiplyOperation:D.AddOperation}}var c=-1===i.toonIndex?"toon00.bmp":e.toonTextures[i.toonIndex].fileName;o.gradientMap=this._loadTexture(c,n,{isToonTexture:!0,isDefaultToonTexture:this._isDefaultToonTexture(c)}),o.userData.outlineParameters={thickness:1===i.edgeFlag?.003:0,color:[0,0,0],alpha:1,visible:1===i.edgeFlag}}else{var u;-1!==i.textureIndex&&(o.map=this._loadTexture(e.textures[i.textureIndex],n)),-1===i.envTextureIndex||1!==i.envFlag&&2!=i.envFlag||(o.envMap=this._loadTexture(e.textures[i.envTextureIndex],n),o.combine=1===i.envFlag?D.MultiplyOperation:D.AddOperation),-1===i.toonIndex||0!==i.toonFlag?(c="toon"+("0"+(i.toonIndex+1)).slice(-2)+".bmp",u=!0):(c=e.textures[i.toonIndex],u=!1),console.log("toonFileName="+c),console.log("----"),o.gradientMap=this._loadTexture(c,n,{isToonTexture:!0,isDefaultToonTexture:u}),o.userData.outlineParameters={thickness:i.edgeSize/300,color:i.edgeColor.slice(0,3),alpha:i.edgeColor[3],visible:0!==(16&i.flag)&&i.edgeSize>0}}void 0!==o.map&&(o.transparent||this._checkImageTransparency(o.map,t,a),o.emissive.multiplyScalar(.2)),r.push(new D.MeshToonMaterial(o))}if("pmx"===e.metadata.format){function d(e,t){for(var r=0,n=e.length;r<n;r++){var a=e[r];if(-1!==a.index){var i=t[a.index];i.opacity!==a.diffuse[3]&&(i.transparent=!0)}}}a=0;for(var h=e.morphs.length;a<h;a++){var p=e.morphs[a],f=p.elements;if(0===p.type)for(var m=0,A=f.length;m<A;m++){var g=e.morphs[f[m].index];8===g.type&&d(g.elements,r)}else 8===p.type&&d(f,r)}}return r},_getTGALoader:function(){if(null===this.tgaLoader){if(void 0===P.a)throw new Error("THREE.MMDLoader: Import TGALoader");this.tgaLoader=new P.a(this.manager)}return this.tgaLoader},_isDefaultToonTexture:function(e){return 10===e.length&&/toon(10|0[0-9])\.bmp/.test(e)},_loadTexture:function(e,r,n,a,i){var o,s=this;if(!0===(n=n||{}).isDefaultToonTexture){var l;try{l=parseInt(e.match(/toon([0-9]{2})\.bmp$/)[1])}catch(d){console.warn("THREE.MMDLoader: "+e+" seems like a not right default texture path. Using toon00.bmp instead."),l=0}o=t[l]}else o=this.resourceDir[e];if(void 0!==r[o])return r[o];var c=this.manager.getHandler(o);null===c&&(c=".tga"===e.slice(-4).toLowerCase()?this._getTGALoader():this.textureLoader);var u=c.load(o,(function(e){!0===n.isToonTexture&&(e.image=s._getRotatedImage(e.image),e.magFilter=D.NearestFilter,e.minFilter=D.NearestFilter),e.flipY=!1,e.wrapS=D.RepeatWrapping,e.wrapT=D.RepeatWrapping;for(var t=0;t<u.readyCallbacks.length;t++)u.readyCallbacks[t](u);delete u.readyCallbacks}),a,i);return u.readyCallbacks=[],r[o]=u,u},_getRotatedImage:function(e){var t=document.createElement("canvas"),r=t.getContext("2d"),n=e.width,a=e.height;return t.width=n,t.height=a,r.clearRect(0,0,n,a),r.translate(n/2,a/2),r.rotate(.5*Math.PI),r.translate(-n/2,-a/2),r.drawImage(e,0,0),r.getImageData(0,0,n,a)},_checkImageTransparency:function(){var e=Object(c.a)(l.a.mark((function e(t,r,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.readyCallbacks.push((function(e){function a(e,t){var r=e.width,n=e.height,a=Math.round(t.x*r)%r,i=Math.round(t.y*n)%n;a<0&&(a+=r),i<0&&(i+=n);var o=i*r+a;return e.data[4*o+3]}var i=void 0!==e.image.data?e.image:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");return r.drawImage(e,0,0),r.getImageData(0,0,t.width,t.height)}(e.image),o=r.groups[n];(function(e,t,r){var n=e.width,i=e.height;if(e.data.length/(n*i)!==4)return!1;for(var o=0;o<r.length;o+=3){for(var s={x:0,y:0},l=0;l<3;l++){var c=r[3*o+l],u={x:t[2*c+0],y:t[2*c+1]};if(a(e,u)<253)return!0;s.x+=u.x,s.y+=u.y}if(s.x/=3,s.y/=3,a(e,s)<253)return!0}return!1})(i,r.attributes.uv.array,r.index.array.slice(o.start,o.start+o.count))&&(t.transparent=!0)}));case 1:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},o.prototype={constructor:o,build:function(e,t){for(var r=this.buildSkeletalAnimation(e,t).tracks,n=this.buildMorphAnimation(e,t).tracks,a=0,i=n.length;a<i;a++)r.push(n[a]);return new D.AnimationClip("",-1,r)},buildSkeletalAnimation:function(e,t){function r(e,t,r){e.push(t[r+0]/127),e.push(t[r+8]/127),e.push(t[r+4]/127),e.push(t[r+12]/127)}for(var n=[],a={},i=t.skeleton.bones,o={},s=0,l=i.length;s<l;s++)o[i[s].name]=!0;for(s=0;s<e.metadata.motionCount;s++){var c=e.motions[s],u=c.boneName;void 0!==o[u]&&(a[u]=a[u]||[],a[u].push(c))}for(var d in a){var h=a[d];h.sort((function(e,t){return e.frameNum-t.frameNum}));var p=[],f=[],m=[],A=[],g=[],b=t.skeleton.getBoneByName(d).position.toArray();for(s=0,l=h.length;s<l;s++){var v=h[s].frameNum/30,x=h[s].position,j=h[s].rotation,y=h[s].interpolation;p.push(v);for(var O=0;O<3;O++)f.push(b[O]+x[O]);for(O=0;O<4;O++)m.push(j[O]);for(O=0;O<3;O++)r(A,y,O);r(g,y,3)}var C=".bones["+d+"]";n.push(this._createTrack(C+".position",D.VectorKeyframeTrack,p,f,A)),n.push(this._createTrack(C+".quaternion",D.QuaternionKeyframeTrack,p,m,g))}return new D.AnimationClip("",-1,n)},buildMorphAnimation:function(e,t){for(var r=[],n={},a=t.morphTargetDictionary,i=0;i<e.metadata.morphCount;i++){var o=e.morphs[i],s=o.morphName;void 0!==a[s]&&(n[s]=n[s]||[],n[s].push(o))}for(var l in n){var c=n[l];c.sort((function(e,t){return e.frameNum-t.frameNum}));for(var u=[],d=[],h=(i=0,c.length);i<h;i++)u.push(c[i].frameNum/30),d.push(c[i].weight);r.push(new D.NumberKeyframeTrack(".morphTargetInfluences["+a[l]+"]",u,d))}return new D.AnimationClip("",-1,r)},buildCameraAnimation:function(e){function t(e,t){e.push(t.x),e.push(t.y),e.push(t.z)}function r(e,t,r){e.push(t[4*r+0]/127),e.push(t[4*r+1]/127),e.push(t[4*r+2]/127),e.push(t[4*r+3]/127)}var n=[],a=void 0===e.cameras?[]:e.cameras.slice();a.sort((function(e,t){return e.frameNum-t.frameNum}));for(var i,o,s=[],l=[],c=[],u=[],d=[],h=[],p=[],f=[],m=[],A=new D.Quaternion,g=new D.Euler,b=new D.Vector3,v=new D.Vector3,x=0,j=a.length;x<j;x++){var y=a[x],O=y.frameNum/30,C=y.position,w=y.rotation,M=y.distance,k=y.fov,B=y.interpolation;s.push(O),b.set(0,0,-M),v.set(C[0],C[1],C[2]),g.set(-w[0],-w[1],-w[2]),A.setFromEuler(g),b.add(v),b.applyQuaternion(A),t(l,v),(i=c).push((o=A).x),i.push(o.y),i.push(o.z),i.push(o.w),t(u,b),d.push(k);for(var I=0;I<3;I++)r(h,B,I);r(p,B,3);for(I=0;I<3;I++)r(f,B,4);r(m,B,5)}return(n=[]).push(this._createTrack("target.position",D.VectorKeyframeTrack,s,l,h)),n.push(this._createTrack(".quaternion",D.QuaternionKeyframeTrack,s,c,p)),n.push(this._createTrack(".position",D.VectorKeyframeTrack,s,u,f)),n.push(this._createTrack(".fov",D.NumberKeyframeTrack,s,d,m)),new D.AnimationClip("",-1,n)},_createTrack:function(e,t,r,n,a){if(r.length>2){r=r.slice(),n=n.slice(),a=a.slice();for(var i=n.length/r.length,o=a.length/r.length,l=1,c=2,u=r.length;c<u;c++){for(var d=0;d<i;d++)if(n[l*i+d]!==n[(l-1)*i+d]||n[l*i+d]!==n[c*i+d]){l++;break}if(c>l){r[l]=r[c];for(d=0;d<i;d++)n[l*i+d]=n[c*i+d];for(d=0;d<o;d++)a[l*o+d]=a[c*o+d]}}r.length=l+1,n.length=(l+1)*i,a.length=(l+1)*o}var h=new t(e,r,n);return h.createInterpolant=function(e){return new s(this.times,this.values,this.getValueSize(),e,new Float32Array(a))},h}},s.prototype=Object.assign(Object.create(D.Interpolant.prototype),{constructor:s,interpolate_:function(e,t,r,n){var a=this.resultBuffer,i=this.sampleValues,o=this.valueSize,s=this.interpolationParams,l=e*o,c=l-o,u=n-t<.05?0:(r-t)/(n-t);if(4===o){var d=s[4*e+0],h=s[4*e+1],p=s[4*e+2],f=s[4*e+3],m=this._calculate(d,h,p,f,u);D.Quaternion.slerpFlat(a,0,i,c,i,l,m)}else if(3===o)for(var A=0;A!==o;++A){d=s[12*e+4*A+0],h=s[12*e+4*A+1],p=s[12*e+4*A+2],f=s[12*e+4*A+3],m=this._calculate(d,h,p,f,u);a[A]=i[c+A]*(1-m)+i[l+A]*m}else{d=s[4*e+0],h=s[4*e+1],p=s[4*e+2],f=s[4*e+3],m=this._calculate(d,h,p,f,u);a[0]=i[c]*(1-m)+i[l]*m}return a},_calculate:function(e,t,r,n,a){for(var i,o,s,l=.5,c=l,u=1-c,d=Math,h=0;h<15;h++){var p=(i=3*u*u*c)*e+(o=3*u*c*c)*t+(s=c*c*c)-a;if(d.abs(p)<1e-5)break;l/=2,u=1-(c+=p<0?l:-l)}return i*r+o*n+s}}),e}(),U=r(410),V=r(421),L=r(408),z=r(424),W=(r(300),r(332),r(256),r(29)),Y=Object(L.a)((function(e){return Object(z.a)({formControl:{margin:e.spacing(1),minWidth:200},selectEmpty:{marginTop:e.spacing(2)}})}));var _=function(e){var t=Y();function r(){return(r=Object(c.a)(l.a.mark((function t(){var r,n,a;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,window.showDirectoryPicker();case 3:r=t.sent,n=new N,a=new E(e.models.length),n.loadFromDir(r,(function(t){a.mesh=t;var r="\u30e2\u30c7\u30eb\u60c5\u5831:\n\n"+t.geometry.userData.MMD.comment;a.comment=r,a.modelName=e.models.length+":"+t.geometry.userData.MMD.modelName;var n=[].concat(Object(S.a)(e.models),[a]),i=e.activeModelId+1;alert(a.comment),e.setModels(n),e.setActiveModelId(i)})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(0),console.error(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))).apply(this,arguments)}return Object(W.jsxs)("div",{style:{textAlign:"center"},children:[Object(W.jsx)("p",{style:{fontSize:20,margin:"5px 0px 0px 0px"},children:"\u30e2\u30c7\u30eb\u64cd\u4f5c"}),Object(W.jsx)("div",{style:{padding:"0px 10px 10px 10px"},children:Object(W.jsxs)(U.a,{variant:"filled",className:t.formControl,children:[Object(W.jsx)("div",{children:Object(W.jsx)(V.a,{style:{width:"100%"},value:e.activeModelId,onChange:function(t){e.setActiveModelId(t.target.value)},native:!0,children:e.models.map((function(e,t){return Object(W.jsx)("option",{value:e.id,children:e.modelName},e.id)}))})}),Object(W.jsxs)("div",{children:[Object(W.jsx)(b.a,{variant:"contained",style:{width:"50%"},onClick:function(){return r.apply(this,arguments)},children:"\u8aad\u307f\u8fbc\u307f"}),Object(W.jsx)(b.a,{variant:"contained",style:{width:"50%"},onClick:function(){if(-1!==e.activeModelId){var t=e.models.filter((function(t){return t.id!==e.activeModelId}));console.log(t);var r=e.activeModelId-1;e.setModels(t),e.setActiveModelId(r)}else console.log("\u3053\u308c\u4ee5\u4e0a\u524a\u9664\u306f\u3067\u304d\u306a\u3044")},children:"\u524a\u9664"})]})]})})]})},J=r(422),K=r(20),H=r(11),G=r(25),X=r(23),q=r(14),Z=r(15),$=function(e){Object(q.a)(r,e);var t=Object(Z.a)(r);function r(e){var n;Object(T.a)(this,r),(n=t.call(this)).mesh=void 0,n.mesh=e,n.matrix.copy(e.matrixWorld).invert();var a=new D.SphereGeometry(.1,16,8),i=new D.MeshBasicMaterial({color:new D.Color(6579455),depthTest:!1,depthWrite:!1,transparent:!0}),o=(n.mesh.geometry.userData.MMD,0);console.log(n.mesh);var s,l=Object(K.a)(n.mesh.skeleton.bones);try{for(l.s();!(s=l.n()).done;){var c=s.value,u=new D.Mesh(a,i);u.name="Helper id:"+o,u.userData={bone_id:o};var d=n.getPosition(c,n.matrix);u.position.set(d.x,d.y,d.z),n.mesh.add(u),o++}}catch(h){l.e(h)}finally{l.f()}return n.matrixAutoUpdate=!0,n}return Object(H.a)(r,[{key:"updateMatrixWorld",value:function(e){this.matrix.copy(this.mesh.matrixWorld).invert();var t,n=0,a=Object(K.a)(this.mesh.children);try{for(a.s();!(t=a.n()).done;){var i=t.value;if(0!==n){if("Mesh"===i.type&&null!=i.userData.bone_id){var o=this.mesh.skeleton.bones[i.userData.bone_id];if(!o)continue;var s=this.getPosition(o,this.matrix);i.position.copy(s),i.visible=this.visible}n++}else n++}}catch(l){a.e(l)}finally{a.f()}this.matrix.copy(this.mesh.matrixWorld),Object(G.a)(Object(X.a)(r.prototype),"updateMatrixWorld",this).call(this,e)}},{key:"getPosition",value:function(e,t){return(new D.Vector3).setFromMatrixPosition(e.matrixWorld).applyMatrix4(t)}}]),r}(D.Object3D);var ee=function(e){var t=Object(n.useRef)(),r=Object(n.useRef)(),a=Object(R.c)().scene,i=Object(n.useState)(null),o=Object(u.a)(i,2),s=o[0],l=o[1],c=Object(n.useState)(0),d=Object(u.a)(c,2),h=d[0],p=d[1],f=Object(n.useCallback)((function(e){"Mesh"===e.object.type&&p((function(t){return e.object.userData.bone_id}))}),[]);return Object(n.useEffect)((function(){if("undefined"!==typeof r.current){var n=r.current,i=function(t){e.orbit.current&&(e.orbit.current.enabled=!t.value)};if(n){if(e.activeModelId==e.modelClass.id){var o,c=null===(o=t.current)||void 0===o?void 0:o.children[0];if(!c)return;if(n.attach(c.skeleton.bones[h]),e.isShowBoneSelect){if(c)if(null==s){var u=new $(c);l(u),a.add(u)}else s.visible=!0}else s&&(s.visible=!1);n.setMode(e.controlMode)}else n.detach(),null!=s&&(s.visible=!1);return n.addEventListener("dragging-changed",i),function(){n.removeEventListener("dragging-changed",i)}}}}),[e.activeModelId,e.modelClass.id,h,e.isShowBoneSelect,e.controlMode,s,a]),Object(W.jsx)(W.Fragment,{children:Object(W.jsx)(J.a,{ref:r,enabled:e.activeModelId==e.modelClass.id,children:Object(W.jsx)("mesh",{ref:t,onClick:f,children:Object(W.jsx)("primitive",{object:e.modelClass.mesh,dispose:null,scale:[.5,.5,.5],position:e.position})})})})};var te=function(e){function t(t){e.setControlMode(t)}return Object(W.jsxs)("div",{style:{textAlign:"center"},children:[Object(W.jsx)("p",{style:{fontSize:20,margin:"5px 0px 0px 0px"},children:"\u30dc\u30fc\u30f3\u64cd\u4f5c"}),Object(W.jsxs)("div",{style:{padding:"5px 10px 10px 10px"},children:[Object(W.jsx)("input",{style:{width:"30%"},type:"button",value:"\u9078\u629e",onClick:function(){e.isShowBoneSelect?e.setIsShowBoneSelect(!1):e.setIsShowBoneSelect(!0)}}),Object(W.jsx)("input",{style:{width:"30%"},type:"button",value:"\u56de\u8ee2",onClick:function(){return t("rotate")}}),Object(W.jsx)("input",{style:{width:"30%"},type:"button",value:"\u79fb\u52d5",onClick:function(){return t("translate")}})]})]})},re=r(425),ne=r(426),ae=Object(L.a)((function(e){return Object(z.a)({formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}})}));function ie(e){var t=ae(),r=Object(n.useState)(-1),a=Object(u.a)(r,2),i=a[0],o=a[1];return Object(W.jsxs)(U.a,{variant:"filled",className:t.formControl,children:[Object(W.jsx)(re.a,{id:"label",children:e.label}),Object(W.jsxs)(V.a,{labelId:"label",style:{minWidth:150},onChange:function(t){var r=t.target.value;"string"===typeof r&&(e.handleChange(null,0,e.morphType,i),o(Number(r)))},value:i,native:!0,children:[Object(W.jsx)("option",{value:-1},-1),e.morphs.map((function(e,t){return Object(W.jsx)("option",{value:e.id,children:e.name},t)}))]}),Object(W.jsx)(ne.a,{value:e.morphSliders[e.morphType],onChange:function(t,r){return e.handleChange(t,r,e.morphType,i)},"aria-labelledby":"continuous-slider",step:.001,min:0,max:1})]})}var oe=function(e){var t=Object(n.useState)([[],[],[],[]]),r=Object(u.a)(t,2),a=r[0],i=r[1],o=Object(n.useState)([0,0,0,0]),s=Object(u.a)(o,2),l=s[0],c=s[1];Object(n.useEffect)((function(){if(-1!==e.activeModelId)if(e.models.length<e.activeModelId)console.error("\u5b58\u5728\u3057\u306a\u3044\u914d\u5217\u306b\u30a2\u30af\u30bb\u30b9\u3057\u3088\u3046\u3068\u3057\u3066\u3044\u307e\u3059\u3002");else{var t=e.models[e.activeModelId].mesh;if(t){var r,n=t.geometry.userData.MMD.morphs,a=[[],[],[],[]],o=0,s=Object(K.a)(n);try{for(s.s();!(r=s.n()).done;){var l=r.value,c={id:o,name:l.name};if(l.panel){if(l.panel<1||l.panel>4){o++;continue}a[l.panel-1].push(c)}else{if(l.type<1||l.type>4){o++;continue}a[l.type-1].push(c)}o++}}catch(u){s.e(u)}finally{s.f()}i(a)}}}),[e.models,e.activeModelId]);var d=function(t,r,n,a){var i=e.models[e.activeModelId].mesh;if(i.morphTargetInfluences){i.morphTargetInfluences[a]=r;var o=l.slice();o[n]=r,c(o)}};return Object(W.jsxs)("div",{style:{textAlign:"center"},children:[Object(W.jsx)("p",{style:{fontSize:20,margin:"5px 0px 0px 0px"},children:"\u8868\u60c5\u64cd\u4f5c"}),Object(W.jsxs)("div",{style:{padding:"0px 10px 10px 10px"},children:[Object(W.jsx)(ie,{label:"\u307e\u3086",morphs:a[0],morphType:0,handleChange:d,morphSliders:l}),Object(W.jsx)(ie,{label:"\u76ee",morphs:a[1],morphType:1,handleChange:d,morphSliders:l})]}),Object(W.jsxs)("div",{style:{padding:"0px 10px 10px 10px"},children:[Object(W.jsx)(ie,{label:"\u30ea\u30c3\u30d7",morphs:a[2],morphType:2,handleChange:d,morphSliders:l}),Object(W.jsx)(ie,{label:"\u305d\u306e\u4ed6",morphs:a[3],morphType:3,handleChange:d,morphSliders:l})]})]})},se=r(335),le=r(423);var ce=function(){var e=Object(n.useState)([]),t=Object(u.a)(e,2),r=t[0],i=t[1],o=Object(n.useState)(0),s=Object(u.a)(o,2),O=s[0],w=s[1],k=Object(n.useState)(-1),S=Object(u.a)(k,2),T=S[0],E=S[1],F=Object(n.useState)("rotate"),D=Object(u.a)(F,2),P=D[0],Q=D[1],U=Object(n.useState)(!1),V=Object(u.a)(U,2),L=V[0],z=V[1],Y=Object(n.useRef)(),J=a.a.useState(null),K=Object(u.a)(J,2),H=K[0],G=K[1],X=a.a.useState(""),q=Object(u.a)(X,2),Z=q[0],$=q[1],re=a.a.useState("on"===localStorage.getItem("darkMode")),ne=Object(u.a)(re,2),ae=ne[0],ie=ne[1],ce=function(e,t){G(e.currentTarget),$(t)},ue=function(){G(null),$("")},de=Object(h.a)({palette:{type:ae?"dark":"light"}}),he=function(){var e=Object(c.a)(l.a.mark((function e(t){var n,a,i,o,s,c,d;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(G(null),$(""),0!==r.length){e.next=5;break}return alert("\u30e2\u30c7\u30eb\u30c7\u30fc\u30bf\u304c\u3042\u308a\u307e\u305b\u3093\u3002"),e.abrupt("return");case 5:return a={types:[{description:"MMD Pose Data",accept:{"*/*":[".vpd"]}}],excludeAcceptAllOption:!0,multiple:!1},e.next=8,window.showOpenFilePicker(a);case 8:if(i=e.sent,o=Object(u.a)(i,1),n=o[0]){e.next=13;break}return e.abrupt("return");case 13:return e.next=15,n.getFile();case 15:s=e.sent,c=new N,d=new se.a,c.loadVPDFromFile(s,(function(e){var t=r[O].mesh;t?d.pose(t,e):alert("\u30e2\u30c7\u30eb\u30c7\u30fc\u30bf\u3092\u53d6\u5f97\u3067\u304d\u307e\u305b\u3093\u3067\u3057\u305f\u3002")}),(function(e){console.log(e)}),(function(e){console.log(e)}));case 19:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(W.jsxs)(p.a,{theme:de,children:[Object(W.jsx)(f.a,{}),Object(W.jsx)(m.a,{color:"default",children:Object(W.jsxs)(A.a,{variant:"dense",children:[Object(W.jsxs)(I.a,{display:"flex",flexGrow:1,children:[Object(W.jsxs)(g.a,{variant:"h6",children:["React MMD Viewer ver.",d.c]}),Object(W.jsx)(b.a,{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:function(e){return ce(e,"file")},children:"File"}),Object(W.jsx)(v.a,{id:"menu-appbar",anchorEl:H,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:"file"===Z,onClose:ue,children:Object(W.jsx)(x.a,{onClick:he,children:"\u30dd\u30fc\u30ba\u8aad\u307f\u8fbc\u307f"})})]}),Object(W.jsx)(j.a,{"aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:function(e){return ce(e,"info")},color:"inherit",children:Object(W.jsx)(C.a,{})}),Object(W.jsx)(v.a,{id:"menu-appbar",anchorEl:H,anchorOrigin:{vertical:"top",horizontal:"right"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"right"},open:"info"===Z,onClose:ue,children:Object(W.jsx)(x.a,{onClick:function(){return window.open("https://github.com/"+d.a.name+"/"+d.b)},children:"Github"})}),ae?Object(W.jsx)(j.a,{color:"inherit",onClick:function(){localStorage.setItem("darkMode","off"),ie(!1)},children:Object(W.jsx)(M.a,{})}):Object(W.jsx)(j.a,{color:"inherit",onClick:function(){localStorage.setItem("darkMode","on"),ie(!0)},children:Object(W.jsx)(B.a,{})})]})}),Object(W.jsxs)(y.a,{container:!0,children:[Object(W.jsx)(y.a,{item:!0,xs:12,children:Object(W.jsxs)(R.a,{style:{backgroundColor:"black",height:"500px"},colorManagement:!1,camera:{fov:50,position:[0,0,30]},children:[Object(W.jsx)("ambientLight",{}),Object(W.jsx)(n.Suspense,{fallback:null,children:r.map((function(e,t){return Object(W.jsx)(ee,{modelClass:e,position:[0,0,0],selectObject:O,setSelectObject:w,isShowBoneSelect:L,activeModelId:T,controlMode:P,orbit:Y},e.id)}))}),Object(W.jsx)(le.a,{ref:Y}),Object(W.jsx)("gridHelper",{})]})}),Object(W.jsx)(y.a,{item:!0,xs:4,style:{border:"1px solid #ffffff"},children:Object(W.jsx)(_,{models:r,setModels:i,activeModelId:T,setActiveModelId:E},"modelcontrol")}),Object(W.jsx)(y.a,{item:!0,xs:4,style:{border:"1px solid #ffffff"},children:Object(W.jsx)(te,{models:r,setActiveModelId:E,controlMode:P,setControlMode:Q,isShowBoneSelect:L,setIsShowBoneSelect:z},"bonecontrol")}),Object(W.jsx)(y.a,{item:!0,xs:4,style:{border:"1px solid #ffffff"},children:Object(W.jsx)(oe,{models:r,setModels:i,activeModelId:T,setActiveModelId:E},"faceControl")})]})]})},ue=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,429)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,i=t.getLCP,o=t.getTTFB;r(e),n(e),a(e),i(e),o(e)}))};o.a.render(Object(W.jsx)(a.a.StrictMode,{children:Object(W.jsx)(ce,{})}),document.getElementById("root")),ue()}},[[382,1,2]]]);
//# sourceMappingURL=main.80b15a4d.chunk.js.map